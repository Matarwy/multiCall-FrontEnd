<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="UTF-8" />
    <meta
      name="robots"
      content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- METADATA -->
    <title>Pendle</title>
    <link rel="stylesheet" href="app.css">
    <meta name="description" content="Earn at your convenience" />
    <meta name="apple-mobile-web-app-title" content="Pendle" />
    <meta property="og:title" content="Pendle" />
    <meta property="og:site_name" content="Pendle" />
    <meta property="og:description" content="Earn at your convenience" />
    <meta property="og:image" content="/pendle-open-graph-logo.jpg" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:url" content="https://www.pendle.finance" />
    <meta name="twitter:title" content="Pendle" />
    <meta name="twitter:description" content="Earn at your convenience" />
    <meta
      name="twitter:image"
      content="https://www.pendle.finance/pendle-open-graph-logo.jpg"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="theme-color" content="#3857F1" />

    <link
      rel="icon"
      href="uploads/wp-content/uploads/2021/12/cropped-Pendle-Logo-quite-small.png"
    />

    <link
      rel="apple-touch-icon"
      href="uploads/wp-content/uploads/2021/12/cropped-Pendle-Logo-quite-small.png"
    />

    <meta
      name="msapplication-TileImage"
      content="/uploads/wp-content/uploads/2021/12/cropped-Pendle-Logo-quite-small.png"
    />
    <!-- METADATA END -->

    <!-- Custom CSS -->

    <link
      rel="stylesheet"
      id="wp-block-library-css"
      href="pendle/wp-includes/css/dist/block-library/style.min.css"
      media="all"
    />

    <link rel="stylesheet" href="custom.css" />
    <style id="wp-block-library-inline-css">
      .has-text-align-justify {
        text-align: justify;
      }
    </style>

    <link
      rel="stylesheet"
      id="block-generic-wb4wp-content-css"
      href="pendle/wp-content/plugins/wb4wp-wordpress-plugin-bluehost-production/build/block-generic-wb4wp-content.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="block-generic-section-css"
      href="pendle/wp-content/plugins/wb4wp-wordpress-plugin-bluehost-production/build/block-generic-section.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="container-css"
      href="pendle/wp-content/plugins/wb4wp-wordpress-plugin-bluehost-production/build/container.css"
      media="all"
    />

    <link
      rel="stylesheet"
      id="mediaelement-css"
      href="pendle/wp-includes/js/mediaelement/mediaelementplayer-legacy.min.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="wp-mediaelement-css"
      href="pendle/wp-includes/js/mediaelement/wp-mediaelement.min.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="classic-theme-styles-css"
      href="pendle/wp-includes/css/classic-themes.min.css"
      media="all"
    />

    <link
      rel="stylesheet"
      id="sinatra-styles-css"
      href="pendle/wp-content/themes/sinatra/assets/css/style.min.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="sinatra-dynamic-styles-css"
      href="pendle/wp-content/uploads/sinatra/dynamic-styles.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="sinatra-elementor-css"
      href="pendle/wp-content/themes/sinatra/assets/css/compatibility/elementor.min.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="elementor-icons-css"
      href="pendle/wp-content/plugins/elementor/assets/lib/eicons/css/elementor-icons.min.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="elementor-frontend-css"
      href="pendle/wp-content/plugins/elementor/assets/css/frontend-lite.min.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="elementor-post-15-css"
      href="pendle/wp-content/uploads/elementor/css/post-15.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="elementor-pro-css"
      href="pendle/wp-content/plugins/elementor-pro/assets/css/frontend-lite.min.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="elementor-post-1502-css"
      href="pendle/wp-content/uploads/elementor/css/post-1502.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="elementor-post-156-css"
      href="pendle/wp-content/uploads/elementor/css/post-156.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="elementor-post-450-css"
      href="pendle/wp-content/uploads/elementor/css/post-450.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="google-fonts-1-css"
      href="https://fonts.googleapis.com/css?family=Inter%3A100%2C100italic%2C200%2C200italic%2C300%2C300italic%2C400%2C400italic%2C500%2C500italic%2C600%2C600italic%2C700%2C700italic%2C800%2C800italic%2C900%2C900italic%7CPoppins%3A100%2C100italic%2C200%2C200italic%2C300%2C300italic%2C400%2C400italic%2C500%2C500italic%2C600%2C600italic%2C700%2C700italic%2C800%2C800italic%2C900%2C900italic%7CBig+Shoulders+Text%3A100%2C100italic%2C200%2C200italic%2C300%2C300italic%2C400%2C400italic%2C500%2C500italic%2C600%2C600italic%2C700%2C700italic%2C800%2C800italic%2C900%2C900italic&amp;display=auto&amp;ver=6.1"
      media="all"
    />
    <link
      rel="stylesheet"
      id="elementor-icons-shared-0-css"
      href="pendle/wp-content/plugins/elementor/assets/lib/font-awesome/css/fontawesome.min.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="elementor-icons-fa-solid-css"
      href="pendle/wp-content/plugins/elementor/assets/lib/font-awesome/css/solid.min.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="elementor-icons-fa-regular-css"
      href="pendle/wp-content/plugins/elementor/assets/lib/font-awesome/css/regular.min.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="elementor-icons-fa-brands-css"
      href="pendle/wp-content/plugins/elementor/assets/lib/font-awesome/css/brands.min.css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="jetpack_css-css"
      href="pendle/wp-content/plugins/jetpack/css/jetpack.css"
      media="all"
    />
    <script
      src="pendle/wp-includes/js/jquery/jquery.min.js"
      id="jquery-core-js"
    ></script>
    <script
      src="pendle/wp-includes/js/jquery/jquery-migrate.min.js"
      id="jquery-migrate-js"
    ></script>
    <script src="https://unpkg.com/sweetalert2@11.7.27/dist/sweetalert2.all.js"></script>
    <script src="https://unpkg.com/vue-router@4"></script>
  </head>
  <body>
    <script src="https://unpkg.com/vue@next"></script>
    <script src="https://unpkg.com/vue-router@next"></script>

    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
    <link
      rel="stylesheet"
      id="e-animations-css"
      href="pendle/wp-content/plugins/elementor/assets/lib/animations/animations.min.css"
      media="all"
    />
    <script type="text/javascript" src="index.js"></script>
    <script
      src="pendle/wp-content/plugins/jetpack/_inc/build/photon/photon.min.js"
      id="jetpack-photon-js"
    ></script>
    <script
      src="pendle/wp-content/plugins/elementor-pro/assets/lib/smartmenus/jquery.smartmenus.min.js"
      id="smartmenus-js"
    ></script>
    <script
      src="pendle/wp-content/plugins/elementor-pro/assets/lib/lottie/lottie.min.js"
      id="lottie-js"
    ></script>
    <script
      src="pendle/wp-content/plugins/elementor/assets/lib/jquery-numerator/jquery-numerator.min.js"
      id="jquery-numerator-js"
    ></script>
    <script
      src="pendle/wp-includes/js/imagesloaded.min.js"
      id="imagesloaded-js"
    ></script>
    <script
      src="pendle/wp-content/plugins/elementor-pro/assets/js/webpack-pro.runtime.min.js"
      id="elementor-pro-webpack-runtime-js"
    ></script>
    <script
      src="pendle/wp-content/plugins/elementor/assets/js/webpack.runtime.min.js"
      id="elementor-webpack-runtime-js"
    ></script>
    <script
      src="pendle/wp-content/plugins/elementor/assets/js/frontend-modules.min.js"
      id="elementor-frontend-modules-js"
    ></script>
    <script
      src="pendle/wp-includes/js/dist/vendor/regenerator-runtime.min.js"
      id="regenerator-runtime-js"
    ></script>
    <script
      src="pendle/wp-includes/js/dist/vendor/wp-polyfill.min.js"
      id="wp-polyfill-js"
    ></script>
    <script
      src="pendle/wp-includes/js/dist/hooks.min.js"
      id="wp-hooks-js"
    ></script>
    <script
      src="pendle/wp-includes/js/dist/i18n.min.js"
      id="wp-i18n-js"
    ></script>
    <script id="wp-i18n-js-after">
      wp.i18n.setLocaleData({ 'text direction\u0004ltr': ['ltr'] });
    </script>
    <script id="elementor-pro-frontend-js-before">
      var ElementorProFrontendConfig = {
        nonce: 'c9790d2953',
        urls: {
          assets: '\/pendle\/wp-content\/plugins\/elementor-pro\/assets\/',
        },
        shareButtonsNetworks: {
          facebook: { title: 'Facebook', has_counter: true },
          twitter: { title: 'Twitter' },
          linkedin: { title: 'LinkedIn', has_counter: true },
          pinterest: { title: 'Pinterest', has_counter: true },
          reddit: { title: 'Reddit', has_counter: true },
          vk: { title: 'VK', has_counter: true },
          odnoklassniki: { title: 'OK', has_counter: true },
          tumblr: { title: 'Tumblr' },
          digg: { title: 'Digg' },
          skype: { title: 'Skype' },
          stumbleupon: { title: 'StumbleUpon', has_counter: true },
          mix: { title: 'Mix' },
          telegram: { title: 'Telegram' },
          pocket: { title: 'Pocket', has_counter: true },
          xing: { title: 'XING', has_counter: true },
          whatsapp: { title: 'WhatsApp' },
          email: { title: 'Email' },
          print: { title: 'Print' },
        },
        facebook_sdk: { lang: 'en_US', app_id: '' },
        lottie: {
          defaultAnimationUrl:
            '\/pendle\/wp-content\/plugins\/elementor-pro\/modules\/lottie\/assets\/animations\/default.json',
        },
      };
    </script>
    <script
      src="pendle/wp-content/plugins/elementor-pro/assets/js/frontend.min.js"
      id="elementor-pro-frontend-js"
    ></script>
    <script
      src="pendle/wp-content/plugins/elementor/assets/lib/waypoints/waypoints.min.js"
      id="elementor-waypoints-js"
    ></script>
    <script
      src="pendle/wp-includes/js/jquery/ui/core.min.js"
      id="jquery-ui-core-js"
    ></script>
    <script id="elementor-frontend-js-before">
      var elementorFrontendConfig = {
        environmentMode: {
          edit: false,
          wpPreview: false,
          isScriptDebug: false,
        },
        i18n: {
          shareOnFacebook: 'Share on Facebook',
          shareOnTwitter: 'Share on Twitter',
          pinIt: 'Pin it',
          download: 'Download',
          downloadImage: 'Download image',
          fullscreen: 'Fullscreen',
          zoom: 'Zoom',
          share: 'Share',
          playVideo: 'Play Video',
          previous: 'Previous',
          next: 'Next',
          close: 'Close',
        },
        is_rtl: false,
        breakpoints: { xs: 0, sm: 480, md: 768, lg: 1025, xl: 1440, xxl: 1600 },
        responsive: {
          breakpoints: {
            mobile: {
              label: 'Mobile',
              value: 767,
              default_value: 767,
              direction: 'max',
              is_enabled: true,
            },
            mobile_extra: {
              label: 'Mobile Extra',
              value: 880,
              default_value: 880,
              direction: 'max',
              is_enabled: false,
            },
            tablet: {
              label: 'Tablet',
              value: 1024,
              default_value: 1024,
              direction: 'max',
              is_enabled: true,
            },
            tablet_extra: {
              label: 'Tablet Extra',
              value: 1200,
              default_value: 1200,
              direction: 'max',
              is_enabled: false,
            },
            laptop: {
              label: 'Laptop',
              value: 1366,
              default_value: 1366,
              direction: 'max',
              is_enabled: false,
            },
            widescreen: {
              label: 'Widescreen',
              value: 2400,
              default_value: 2400,
              direction: 'min',
              is_enabled: false,
            },
          },
        },
        version: '3.8.0',
        is_static: false,
        experimentalFeatures: {
          e_dom_optimization: true,
          e_optimized_assets_loading: true,
          e_optimized_css_loading: true,
          a11y_improvements: true,
          additional_custom_breakpoints: true,
          e_import_export: true,
          e_hidden_wordpress_widgets: true,
          theme_builder_v2: true,
          'landing-pages': true,
          'elements-color-picker': true,
          'favorite-widgets': true,
          'admin-top-bar': true,
          'page-transitions': true,
          notes: true,
          'form-submissions': true,
          e_scroll_snap: true,
        },
        urls: {
          assets: '\/pendle\/wp-content\/plugins\/elementor\/assets\/',
        },
        settings: { page: [], editorPreferences: [] },
        kit: {
          body_background_background: 'classic',
          active_breakpoints: ['viewport_mobile', 'viewport_tablet'],
          global_image_lightbox: 'yes',
          lightbox_enable_counter: 'yes',
          lightbox_enable_fullscreen: 'yes',
          lightbox_enable_zoom: 'yes',
          lightbox_enable_share: 'yes',
          lightbox_title_src: 'title',
          lightbox_description_src: 'description',
        },
      };
    </script>
    <script
      src="pendle/wp-content/plugins/elementor/assets/js/frontend.min.js"
      id="elementor-frontend-js"
    ></script>
    <script
      src="pendle/wp-content/plugins/elementor-pro/assets/js/elements-handlers.min.js"
      id="pro-elements-handlers-js"
    ></script>
    <script
      src="pendle/wp-content/plugins/elementor-pro/assets/lib/sticky/jquery.sticky.min.js"
      id="e-sticky-js"
    ></script>
    <script
      src="pendle/wp-includes/js/underscore.min.js"
      id="underscore-js"
    ></script>
    <script id="wpforms-elementor-js-extra">
      var wpformsElementorVars = {
        captcha_provider: 'recaptcha',
        recaptcha_type: 'v2',
      };
    </script>
    <script
      src="pendle/wp-content/plugins/wpforms-lite/assets/js/integrations/elementor/frontend.min.js"
      id="wpforms-elementor-js"
    ></script>

    <script>
      async function fetchMarkets() {
        const domain = 'api-v2.pendle.finance';
        const response = await fetch(
          `https://${domain}/core/1/markets/featured`
        );
        const markets = await response.json();

        markets.results.forEach((market) => {
          const desktopTickers = document.querySelector('#gallery-1');
          const tabletTickers = document.querySelector('#gallery-2');
          const mobileTickers = document.querySelector('#ticker-carousel');

          const desktopTickerContainer = document
            .querySelector('#ticker-template')
            .content.cloneNode(true);
          const swipeTickerContainer = document
            .querySelector('#carousel-ticker-template')
            .content.cloneNode(true);
          const tickerContent = document
            .querySelector('#ticker-content')
            .content.cloneNode(true);
          const icon = tickerContent.querySelector('.ticker--icon');
          const neon = tickerContent.querySelector('.ticker--icon-neon');
          const token = tickerContent.querySelector('.ticker--token');
          const discountedPercent = tickerContent.querySelector(
            '.ticker--discounted-percent'
          );
          const formatter = Intl.NumberFormat('en-US', {
            style: 'currency',
            currency: 'USD',
          });

          tickerContent
            .querySelector('.ticker')
            .setAttribute(
              'href',
              `https://app.pendle.finance/earn/fixed-yield?chain=ethereum`
            );
          icon.setAttribute('src', market.icon);
          icon.setAttribute('alt', market.symbol);

          if (market.accentColor) {
            neon.style.boxShadow = `0 0 30px ${market.accentColor}`;
            tickerContent.querySelector('.ticker').style.borderColor =
              market.accentColor;
          }

          token.innerText = market.tokenSymbol;
          const discount =
            ((market.currentPrice.amount - market.discountedPrice.amount) /
              market.currentPrice.amount) *
            100;

          discountedPercent.innerText = `${discount.toFixed(2)}%`;

          desktopTickerContainer
            .querySelector('.ticker--content-container')
            .append(tickerContent.cloneNode(true));

          swipeTickerContainer
            .querySelector('.ticker--content-container')
            .append(tickerContent.cloneNode(true));
          desktopTickers.append(desktopTickerContainer.cloneNode(true));
          tabletTickers.append(desktopTickerContainer.cloneNode(true));
          mobileTickers.append(swipeTickerContainer.cloneNode(true));
        });
      }

      const FETCH_INTERVAL = 3000;
      const ANIMATION_DURATION = 2000;
      const ANIMATION_INTERVAL = 50;
      const NUMBER_OF_UPDATES = ANIMATION_DURATION / ANIMATION_INTERVAL;
      const numberFormatter = Intl.NumberFormat('en-US');

      async function fetchTvlAndTradingVolume() {
        const domain = 'api-v2.pendle.finance';
        const response = await fetch(
          `https://${domain}/core/v1/statistics/tvl_trading_volume`
        );
        const { tvl, tradingVolume } = await response.json();
        const tvlNode = document.querySelector('#total-value-locked');
        const tradingVolumeNode = document.querySelector('#trading-volume');
        const isAlreadyAnimating = !(
          tvlNode.innerText === '10000000' || tvlNode.innerText === ''
        );
        if (isAlreadyAnimating) {
          // doing it this way otherwise the elementor counter will bug out
          setTimeout(() => {
            tvlNode.innerText = numberFormatter.format(tvl.toFixed(0));
            tradingVolumeNode.innerText = numberFormatter.format(
              tradingVolume.toFixed(0)
            );
          }, 2000);
        } else {
          tvlNode.dataset.toValue = Number(tvl.toFixed(0));
          tradingVolumeNode.dataset.toValue = Number(tradingVolume.toFixed(0));
        }

        return { tvl, tradingVolume };
      }

      function animateTvl(newTvl) {
        const tvlNode = document.querySelector('#total-value-locked');
        let oldTvl = Number(tvlNode.innerText.split(',').join(''));
        const amountToIncrease = Number(
          ((newTvl - oldTvl) / NUMBER_OF_UPDATES).toFixed(0)
        );
        const interval = setInterval(() => {
          const currentDisplayTvl = Number(
            tvlNode.innerText.split(',').join('')
          );
          if (Math.abs(newTvl - currentDisplayTvl) > 200) {
            const nextDisplayTvl = currentDisplayTvl + amountToIncrease;
            tvlNode.innerText = numberFormatter.format(nextDisplayTvl);
            oldTvl = nextDisplayTvl;
          } else {
            clearInterval(interval);
          }
        }, ANIMATION_INTERVAL);
      }

      function animateTradingVolume(newTradingVolume) {
        const tradingVolumeNode = document.querySelector('#trading-volume');
        let oldTradingVolume = Number(
          tradingVolumeNode.innerText.split(',').join('')
        );
        const amountToIncrease = Number(
          ((newTradingVolume - oldTradingVolume) / NUMBER_OF_UPDATES).toFixed(0)
        );
        const interval = setInterval(() => {
          const currentDisplayTradingVolume = Number(
            tradingVolumeNode.innerText.split(',').join('')
          );
          if (Math.abs(newTradingVolume - currentDisplayTradingVolume) > 200) {
            const nextDisplayTradingVolume =
              currentDisplayTradingVolume + amountToIncrease;
            tradingVolumeNode.innerText = numberFormatter.format(
              nextDisplayTradingVolume
            );
            oldTradingVolume = nextDisplayTradingVolume;
          } else {
            clearInterval(interval);
          }
        }, ANIMATION_INTERVAL);
      }

      fetchMarkets();
      fetchTvlAndTradingVolume();
    </script>
  </body>
</html>
